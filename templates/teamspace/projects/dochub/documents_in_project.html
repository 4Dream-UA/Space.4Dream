{% extends "base.html" %}

{% block content %}
  <br>
  <h1>DocHub: {{ project.name }}</h1>
  <br><br>
  <a class="btn btn-primary" href="{% url 'teamspace:load_document' pk=project.id %}">Load</a>
  <br>

{% if documents %}
  <table class="table table-striped table-bordered">
    <thead>
      <tr>
        <th>#</th>
        <th>Title</th>
        <th>Description</th>
        {% if user.position.name == "Project Manager" or user.position.name == "CTO" or user.position.name == "HR Manager" %}
          <th>Action</th>
        {% endif %}
        <th>File</th>
        <th>Author</th>
        <th>Date</th>
      </tr>
    </thead>
    <tbody>
      {% for document in documents %}
        <tr>
          <td>{{ forloop.counter }}</td>
          <td>
            {{ document.name }}
            {% if document.worker == user %}
              <br>
              <a class="btn btn-primary" href="{% url 'teamspace:update_document' pk=document.id %}">E</a>
              <a class="btn btn-danger" href="{% url 'teamspace:delete_document' pk=document.id %}">D</a>
            {% endif %}
          </td>
          <td>{{ document.description|linebreaksbr }}</td>
          {% if user.position.name == "Project Manager" or user.position.name == "CTO" or user.position.name == "HR Manager" %}
            <td>
              <a class="btn btn-primary" href="{% url 'teamspace:update_document' pk=document.id %}">E</a>
              <br>
              <a class="btn btn-danger" href="{% url 'teamspace:delete_document' pk=document.id %}">D</a>
            </td>
          {% endif %}
          <td>
            <a href="{{ document.document.url }}" target="_blank" download>
              {{ document.document.name }}
            </a>
          </td>
          <td>{{ document.worker.get_full_name|default:document.worker.username }}</td>
          <td>{{ document.date }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% else %}
  <p>None...</p>
{% endif %}
{% endblock %}
